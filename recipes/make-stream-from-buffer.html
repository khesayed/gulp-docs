<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Make stream from buffer (memory contents) | Gulp Documentation</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.3.1">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../gitbook/style.css">
    
    

        
    
    
    <link rel="next" href="../recipes/mocha-test-runner-with-gulp.html" />
    
    
    <link rel="prev" href="../recipes/incremental-builds-with-concatenate.html" />
    

        
    </head>
    <body>
        
        
    <div class="book" data-level="6.6" data-basepath=".." data-revision="Fri Sep 11 2015 11:31:51 GMT+0800 (CST)">
    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Type to search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        

        

        
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="getting-started.html">
            
                
                    <a href="../getting-started.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Getting Started
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="API.html">
            
                
                    <a href="../API.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        API
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="CLI.html">
            
                
                    <a href="../CLI.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        CLI
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4" data-path="writing-a-plugin/index.html">
            
                
                    <a href="../writing-a-plugin/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Writing a Plugin
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="writing-a-plugin/guidelines.html">
            
                
                    <a href="../writing-a-plugin/guidelines.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Guidelines
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="writing-a-plugin/using-buffers.html">
            
                
                    <a href="../writing-a-plugin/using-buffers.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        Using buffers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="writing-a-plugin/dealing-with-streams.html">
            
                
                    <a href="../writing-a-plugin/dealing-with-streams.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Dealing with streams
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="writing-a-plugin/testing.html">
            
                
                    <a href="../writing-a-plugin/testing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Testing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="writing-a-plugin/recommended-modules.html">
            
                
                    <a href="../writing-a-plugin/recommended-modules.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Recommended Modules
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="FAQ.html">
            
                
                    <a href="../FAQ.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        FAQ
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6" data-path="recipes/index.html">
            
                
                    <a href="../recipes/index.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Recipes
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="recipes/automate-release-workflow.html">
            
                
                    <a href="../recipes/automate-release-workflow.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Automate release workflow
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="recipes/combining-streams-to-handle-errors.html">
            
                
                    <a href="../recipes/combining-streams-to-handle-errors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                        Combining streams to handle errors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.3" data-path="recipes/delete-files-folder.html">
            
                
                    <a href="../recipes/delete-files-folder.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                        Delete files and folders
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.4" data-path="recipes/fast-browserify-builds-with-watchify.html">
            
                
                    <a href="../recipes/fast-browserify-builds-with-watchify.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                        Fast browserify builds with watchify
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.5" data-path="recipes/incremental-builds-with-concatenate.html">
            
                
                    <a href="../recipes/incremental-builds-with-concatenate.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                        Incremental rebuilding, including operating on full file sets
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="6.6" data-path="recipes/make-stream-from-buffer.html">
            
                
                    <a href="../recipes/make-stream-from-buffer.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                        Make stream from buffer (memory contents)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.7" data-path="recipes/mocha-test-runner-with-gulp.html">
            
                
                    <a href="../recipes/mocha-test-runner-with-gulp.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                        Mocha test-runner with gulp
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.8" data-path="recipes/only-pass-through-changed-files.html">
            
                
                    <a href="../recipes/only-pass-through-changed-files.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.8.</b>
                        
                        Only pass through changed files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.9" data-path="recipes/pass-arguments-from-cli.html">
            
                
                    <a href="../recipes/pass-arguments-from-cli.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.9.</b>
                        
                        Pass parameters from the command line
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.10" data-path="recipes/rebuild-only-files-that-change.html">
            
                
                    <a href="../recipes/rebuild-only-files-that-change.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.10.</b>
                        
                        Rebuild only files that change
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.11" data-path="recipes/running-task-steps-per-folder.html">
            
                
                    <a href="../recipes/running-task-steps-per-folder.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.11.</b>
                        
                        Generating a file per folder
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.12" data-path="recipes/running-tasks-in-series.html">
            
                
                    <a href="../recipes/running-tasks-in-series.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.12.</b>
                        
                        Running tasks in series
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.13" data-path="recipes/server-with-livereload-and-css-injection.html">
            
                
                    <a href="../recipes/server-with-livereload-and-css-injection.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.13.</b>
                        
                        Server with live-reloading and CSS injection
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.14" data-path="recipes/sharing-streams-with-stream-factories.html">
            
                
                    <a href="../recipes/sharing-streams-with-stream-factories.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.14.</b>
                        
                        Sharing streams with stream factories
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.15" data-path="recipes/specifying-a-cwd.html">
            
                
                    <a href="../recipes/specifying-a-cwd.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.15.</b>
                        
                        Specifying a new cwd (current working directory)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.16" data-path="recipes/split-tasks-across-multiple-files.html">
            
                
                    <a href="../recipes/split-tasks-across-multiple-files.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.16.</b>
                        
                        Split tasks across multiple files
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.17" data-path="recipes/using-external-config-file.html">
            
                
                    <a href="../recipes/using-external-config-file.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.17.</b>
                        
                        Using external config file
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.18" data-path="recipes/using-multiple-sources-in-one-task.html">
            
                
                    <a href="../recipes/using-multiple-sources-in-one-task.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.18.</b>
                        
                        Using multiple sources in one task
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.19" data-path="recipes/browserify-transforms.html">
            
                
                    <a href="../recipes/browserify-transforms.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.19.</b>
                        
                        Browserify + Transforms
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.20" data-path="recipes/browserify-uglify-sourcemap.html">
            
                
                    <a href="../recipes/browserify-uglify-sourcemap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.20.</b>
                        
                        Browserify + Uglify with sourcemaps
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.21" data-path="recipes/browserify-with-globs.html">
            
                
                    <a href="../recipes/browserify-with-globs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.21.</b>
                        
                        Browserify + Globs
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.22" data-path="recipes/minified-and-non-minified.html">
            
                
                    <a href="../recipes/minified-and-non-minified.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.22.</b>
                        
                        Output both a minified and non-minified version
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.23" data-path="recipes/templating-with-swig-and-yaml-front-matter.html">
            
                
                    <a href="../recipes/templating-with-swig-and-yaml-front-matter.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.23.</b>
                        
                        Templating with Swig and YAML front-matter
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.24" data-path="recipes/handling-the-delete-event-on-watch.html">
            
                
                    <a href="../recipes/handling-the-delete-event-on-watch.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.24.</b>
                        
                        Handling the Delete Event on Watch
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="6.25" data-path="recipes/maintain-directory-structure-while-globbing.html">
            
                
                    <a href="../recipes/maintain-directory-structure-while-globbing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.25.</b>
                        
                        Maintain Directory Structure while Globbing
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                Published with GitBook
            </a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Table of Contents"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search" aria-label="Search"><i class="fa fa-search"></i></a>
    
    <div id="font-settings-wrapper" class="dropdown pull-left">
        <a href="#" class="btn toggle-dropdown" aria-label="Font Settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="buttons">
        <button type="button" id="reduce-font-size" class="button size-2">A</button>
        <button type="button" id="enlarge-font-size" class="button size-2">A</button>
    </div>

    <div class="buttons font-family-list">
        <button type="button" data-font="0" class="button">Serif</button>
        <button type="button" data-font="1" class="button">Sans</button>
    </div>

    <div class="buttons color-theme-list">
        <button type="button" id="color-theme-preview-0" class="button size-3" data-theme="0">White</button>
        <button type="button" id="color-theme-preview-1" class="button size-3" data-theme="1">Sepia</button>
        <button type="button" id="color-theme-preview-2" class="button size-3" data-theme="2">Night</button>
    </div>
</div>

    </div>

    <!-- Actions Right -->
    
    <div class="dropdown pull-right">
        <a href="#" class="btn toggle-dropdown" aria-label="Share"><i class="fa fa-share-alt"></i>
        </a>
        <div class="dropdown-menu font-settings dropdown-left">
            <div class="dropdown-caret">
                <span class="caret-outer"></span>
                <span class="caret-inner"></span>
            </div>
            <div class="buttons">
                <button type="button" data-sharing="twitter" class="button">
                    Share on Twitter
                </button>
                <button type="button" data-sharing="google-plus" class="button">
                    Share on Google
                </button>
                <button type="button" data-sharing="facebook" class="button">
                    Share on Facebook
                </button>
                <button type="button" data-sharing="weibo" class="button">
                    Share on Weibo
                </button>
                <button type="button" data-sharing="instapaper" class="button">
                    Share on Instapaper
                </button>
            </div>
        </div>
    </div>
    

    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Google"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Twitter"><i class="fa fa-twitter"></i></a>
    
    
    


    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../" >Gulp Documentation</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="make-stream-from-buffer-memory-contents">Make stream from buffer (memory contents)</h1>
<p>Sometimes you may need to start a stream with files that their contents are in a variable and not in a physical file. In other words, how to start a &apos;gulp&apos; stream without using <code>gulp.src()</code>.</p>
<p>Let&apos;s say for example that we have a directory with js lib files and another directory with versions of some module. The target of the build would be to create one js file for each version, containing all the libs and the version of the module concatenated.</p>
<p>Logically we would break it down like this:</p>
<ul>
<li>load the lib files</li>
<li>concatenate the lib file contents</li>
<li>load the versions files</li>
<li>for each version file, concatenate the libs&apos; contents and the version file contents</li>
<li>for each version file, output the result in a file</li>
</ul>
<p>Imagine this file structure:</p>
<pre><code class="lang-sh">&#x251C;&#x2500;&#x2500; libs
&#x2502;   &#x251C;&#x2500;&#x2500; lib1.js
&#x2502;   &#x2514;&#x2500;&#x2500; lib2.js
&#x2514;&#x2500;&#x2500; versions
    &#x251C;&#x2500;&#x2500; version.<span class="hljs-number">1</span>.js
    &#x2514;&#x2500;&#x2500; version.<span class="hljs-number">2</span>.js
</code></pre>
<p>You should get:</p>
<pre><code class="lang-sh">&#x2514;&#x2500;&#x2500; output
    &#x251C;&#x2500;&#x2500; version.<span class="hljs-number">1</span>.complete.js <span class="hljs-comment"># lib1.js + lib2.js + version.1.js</span>
    &#x2514;&#x2500;&#x2500; version.<span class="hljs-number">2</span>.complete.js <span class="hljs-comment"># lib1.js + lib2.js + version.2.js</span>
</code></pre>
<p>A simple and modular way to do this would be the following:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> gulp = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;gulp&apos;</span>);
<span class="hljs-keyword">var</span> runSequence = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;run-sequence&apos;</span>);
<span class="hljs-keyword">var</span> source = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vinyl-source-stream&apos;</span>);
<span class="hljs-keyword">var</span> vinylBuffer = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;vinyl-buffer&apos;</span>);
<span class="hljs-keyword">var</span> tap = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;gulp-tap&apos;</span>);
<span class="hljs-keyword">var</span> concat = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;gulp-concat&apos;</span>);
<span class="hljs-keyword">var</span> size = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;gulp-size&apos;</span>);
<span class="hljs-keyword">var</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;path&apos;</span>);
<span class="hljs-keyword">var</span> es = <span class="hljs-built_in">require</span>(<span class="hljs-string">&apos;event-stream&apos;</span>);

<span class="hljs-keyword">var</span> memory = {}; <span class="hljs-comment">// we&apos;ll keep our assets in memory</span>

<span class="hljs-comment">// task of loading the files&apos; contents in memory</span>
gulp.task(<span class="hljs-string">&apos;load-lib-files&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// read the lib files from the disk</span>
  <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">&apos;src/libs/*.js&apos;</span>)
  <span class="hljs-comment">// concatenate all lib files into one</span>
  .pipe(concat(<span class="hljs-string">&apos;libs.concat.js&apos;</span>))
  <span class="hljs-comment">// tap into the stream to get each file&apos;s data</span>
  .pipe(tap(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    <span class="hljs-comment">// save the file contents in memory</span>
    memory[path.basename(file.path)] = file.contents.toString();
  }));
});

gulp.task(<span class="hljs-string">&apos;load-versions&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  memory.versions = {};
  <span class="hljs-comment">// read the version files from the disk</span>
  <span class="hljs-keyword">return</span> gulp.src(<span class="hljs-string">&apos;src/versions/version.*.js&apos;</span>)
  <span class="hljs-comment">// tap into the stream to get each file&apos;s data</span>
  .pipe( tap(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">file</span>) </span>{
    <span class="hljs-comment">// save the file contents in the assets</span>
    memory.versions[path.basename(file.path)] = file.contents.toString();
  }));
});

gulp.task(<span class="hljs-string">&apos;write-versions&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-comment">// we store all the different version file names in an array</span>
  <span class="hljs-keyword">var</span> availableVersions = <span class="hljs-built_in">Object</span>.keys(memory.versions);
  <span class="hljs-comment">// we make an array to store all the stream promises</span>
  <span class="hljs-keyword">var</span> streams = [];

  availableVersions.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">v</span>) </span>{
    <span class="hljs-comment">// make a new stream with fake file name</span>
    <span class="hljs-keyword">var</span> stream = source(<span class="hljs-string">&apos;final.&apos;</span> + v);
    <span class="hljs-comment">// we load the data from the concatenated libs</span>
    <span class="hljs-keyword">var</span> fileContents = memory[<span class="hljs-string">&apos;libs.concat.js&apos;</span>] +
      <span class="hljs-comment">// we add the version&apos;s data</span>
      <span class="hljs-string">&apos;\n&apos;</span> + memory.versions[v];

    streams.push(stream);

    <span class="hljs-comment">// write the file contents to the stream</span>
    stream.write(fileContents);

    process.nextTick(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-comment">// in the next process cycle, end the stream</span>
      stream.end();
    });

    stream
    <span class="hljs-comment">// transform the raw data into the stream, into a vinyl object/file</span>
    .pipe(vinylBuffer())
    <span class="hljs-comment">//.pipe(tap(function(file) { /* do something with the file contents here */ }))</span>
    .pipe(gulp.dest(<span class="hljs-string">&apos;output&apos;</span>));
  });

  <span class="hljs-keyword">return</span> es.merge.apply(<span class="hljs-keyword">this</span>, streams);
});

<span class="hljs-comment">//============================================ our main task</span>
gulp.task(<span class="hljs-string">&apos;default&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">taskDone</span>) </span>{
  runSequence(
    [<span class="hljs-string">&apos;load-lib-files&apos;</span>, <span class="hljs-string">&apos;load-versions&apos;</span>],  <span class="hljs-comment">// load the files in parallel</span>
    <span class="hljs-string">&apos;write-versions&apos;</span>,  <span class="hljs-comment">// ready to write once all resources are in memory</span>
    taskDone           <span class="hljs-comment">// done</span>
  );
});

<span class="hljs-comment">//============================================ our watcher task</span>
<span class="hljs-comment">// only watch after having run &apos;default&apos; once so that all resources</span>
<span class="hljs-comment">// are already in memory</span>
gulp.task(<span class="hljs-string">&apos;watch&apos;</span>, [<span class="hljs-string">&apos;default&apos;</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  gulp.watch(<span class="hljs-string">&apos;./src/libs/*.js&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    runSequence(
      <span class="hljs-string">&apos;load-lib-files&apos;</span>,  <span class="hljs-comment">// we only have to load the changed files</span>
      <span class="hljs-string">&apos;write-versions&apos;</span>
    );
  });

  gulp.watch(<span class="hljs-string">&apos;./src/versions/*.js&apos;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    runSequence(
      <span class="hljs-string">&apos;load-versions&apos;</span>,  <span class="hljs-comment">// we only have to load the changed files</span>
      <span class="hljs-string">&apos;write-versions&apos;</span>
    );
  });
});
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../recipes/incremental-builds-with-concatenate.html" class="navigation navigation-prev " aria-label="Previous page: Incremental rebuilding, including operating on full file sets"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../recipes/mocha-test-runner-with-gulp.html" class="navigation navigation-next " aria-label="Next page: Mocha test-runner with gulp"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../gitbook/app.js"></script>

    
    <script src="../gitbook/plugins/gitbook-plugin-ga/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":null,"family":"sans","size":2},"ga":{"token":"UA-36637973-3","configuration":"auto"},"sitemap":{"hostname":"http://gulpjs.org/"}};
    gitbook.start(config);
});
</script>

        <script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create', 'UA-36637973-3', 'auto');ga('send', 'pageview');</script>
    </body>
    
</html>
